<html>
  <head>
    <title>HornetQ Stomp WebSockets Example</title>
    <link rel="stylesheet" type="text/css" href="../common/common.css" />
    <link rel="stylesheet" type="text/css" href="../common/prettify.css" />
    <script src="../common/prettify.js"></script>
  </head>
  <body onload="prettyPrint()">
     <h1>Stomp WebSockets Example</h1>

     <p>This example shows you how to configure HornetQ to send and receive Stomp messages from modern web browser using Web Sockets.</p>

     <p>The example will start a HornetQ server configured with Stomp over Web Sockets and JMS. Web browsers clients and
       Java application will exchange message using a JMS Topic.</p>
     <para>To enable Stomp over Web Sockets, the server must have a <code>NettyAcceptorFactory</code> configured with a <code>protocol</code>
       parameter set to <code>stomp_ws</code>:</para>
     <pre class="prettyprint">
&lt;acceptor name="stomp-websocket">
   &lt;factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class>
   &lt;param key="protocol" value="stomp_ws"/>
   &lt;param key="port" value="61614"/>
&lt;/acceptor></pre>
     
     <h2>Example step-by-step</h2>

     <p><i>To run the example, simply type <code>mvn verify</code> from this directory</i></p>

    <p>To subscribe to the topic from your web browser, open the <a href="chat/index.html">Chat Example</a> from another tab. 
      The chat example is preconfigured to connect to the HornetQ server with the URL <code>ws://localhost:61614/stomp</code> and subscribe to the JMS Topic (through its core address
      <code>jms.topic.chat</code>).
    </p>
    <p>You can open as many Web clients as you want and they will all exchange messages through the topic</p>
    <p>If you run again the Java application (with <code>./build.sh</code>), the web clients will also receive its message</p>
    
    <h2>Documentation</h2>
    
    <p>A JavaScript library is used on the browser side to be able to use Stomp Over Web Sockets (please see its <a href="http://jmesnil.net/stomp-websocket/doc/">documentation</a>
      for a complete description).

  </body>
</html>