<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <parent>
      <groupId>org.hornetq.tests</groupId>
      <artifactId>hornetq-tests-pom</artifactId>
      <version>2.4.x-SNAPSHOT</version>
   </parent>

   <artifactId>integration-tests</artifactId>
   <packaging>jar</packaging>
   <name>HornetQ Integration Tests</name>

   <properties>
      <hornetq.basedir>${project.basedir}/../..</hornetq.basedir>
       <karaf.version>4.0.6</karaf.version>
       <pax.exam.version>4.9.1</pax.exam.version>
       <jetty.version>9.4.0.M1</jetty.version>
   </properties>

   <dependencies>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-server</artifactId>
         <version>${project.version}</version>
         <scope>test</scope>
         <type>test-jar</type>
      </dependency>
      <dependency>
         <groupId>org.hornetq.tests</groupId>
         <artifactId>unit-tests</artifactId>
         <version>${project.version}</version>
         <scope>test</scope>
         <type>test-jar</type>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-core-client</artifactId>
         <version>${project.version}</version>
         <scope>test</scope>
         <type>test-jar</type>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-jms-client</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-jms-server</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-ra</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-bootstrap</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-commons</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-tools</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-twitter-integration</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-spring-integration</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-journal</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-amqp-protocol</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-stomp-protocol</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.hornetq</groupId>
         <artifactId>hornetq-aerogear-integration</artifactId>
         <version>${project.version}</version>
      </dependency>
      <dependency>
         <groupId>org.jboss.javaee</groupId>
         <artifactId>jboss-jca-api</artifactId>
      </dependency>
      <dependency>
         <groupId>org.jboss.security</groupId>
         <artifactId>jboss-security-spi</artifactId>
      </dependency>
      <dependency>
         <groupId>org.jboss.security</groupId>
         <artifactId>jbosssx</artifactId>
      </dependency>
      <dependency>
         <groupId>org.twitter4j</groupId>
         <artifactId>twitter4j-core</artifactId>
      </dependency>
      <dependency>
         <groupId>junit</groupId>
         <artifactId>junit</artifactId>
      </dependency>
      <dependency>
         <groupId>org.jboss.logging</groupId>
         <artifactId>jboss-logging-processor</artifactId>
      </dependency>
      <dependency>
         <groupId>org.jboss.logging</groupId>
         <artifactId>jboss-logging</artifactId>
      </dependency>
      <dependency>
         <groupId>org.jboss.logmanager</groupId>
         <artifactId>jboss-logmanager</artifactId>
      </dependency>
      <dependency>
         <groupId>org.apache.qpid</groupId>
         <artifactId>qpid-amqp-1-0-client-jms</artifactId>
         <version>0.24</version>
      </dependency>
      <dependency>
         <groupId>org.apache.qpid</groupId>
         <artifactId>proton-jms</artifactId>
      </dependency>
      <dependency>
         <groupId>org.apache.qpid</groupId>
         <artifactId>qpid-client</artifactId>
         <version>0.24</version>
      </dependency>
      <dependency>
         <groupId>org.slf4j</groupId>
         <artifactId>slf4j-api</artifactId>
         <version>1.7.5</version>
      </dependency>
      <dependency>
         <groupId>org.mortbay.jetty</groupId>
         <artifactId>jetty</artifactId>
         <version>7.0.0.pre5</version>
      </dependency>
      <dependency>
         <groupId>org.jboss.javaee</groupId>
         <artifactId>jboss-javaee</artifactId>
         <version>5.0.0.GA</version>
      </dependency>
      <dependency>
         <groupId>org.jboss.jbossts.jts</groupId>
         <artifactId>jbossjts-jacorb</artifactId>
      </dependency>

       <!-- karaf test -->

       <dependency>
           <groupId>org.ops4j.pax.exam</groupId>
           <artifactId>pax-exam-container-karaf</artifactId>
           <version>${pax.exam.version}</version>
           <scope>test</scope>
       </dependency>
       <dependency>
           <groupId>org.ops4j.pax.exam</groupId>
           <artifactId>pax-exam-junit4</artifactId>
           <version>${pax.exam.version}</version>
           <scope>test</scope>
       </dependency>
       <dependency>
           <groupId>org.apache.karaf</groupId>
           <artifactId>apache-karaf</artifactId>
           <version>${karaf.version}</version>
           <type>tar.gz</type>
       </dependency>
       <dependency>
           <groupId>org.apache.karaf.shell</groupId>
           <artifactId>org.apache.karaf.shell.console</artifactId>
           <version>${karaf.version}</version>
       </dependency>
       <!--<dependency>-->
           <!--<groupId>org.hornetq</groupId>-->
           <!--<artifactId>hornetq-pom</artifactId>-->
           <!--<version>${project.version}</version>-->
       <!--</dependency>-->



       <!-- rest test -->
       <dependency>
           <groupId>org.eclipse.jetty.aggregate</groupId>
           <artifactId>jetty-all</artifactId>
           <version>${jetty.version}</version>
           <type>jar</type>
           <classifier>uber</classifier>
       </dependency>
       <dependency>
           <groupId>org.jboss.resteasy</groupId>
           <artifactId>resteasy-jaxrs</artifactId>
       </dependency>
       <dependency>
           <groupId>org.hornetq.rest</groupId>
           <artifactId>hornetq-rest</artifactId>
           <version>${project.version}</version>
           <scope>compile</scope>
       </dependency>

   </dependencies>

   <build>
      <testResources>
         <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
             <excludes>
                 <exclude>**/rest/*.xml</exclude>
             </excludes>
         </testResource>
      </testResources>
      <plugins>
          <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-assembly-plugin</artifactId>
              <executions>
                  <execution>
                      <phase>process-test-classes</phase>
                      <id>bwlist-rest-test-war</id>
                      <goals>
                          <goal>single</goal>
                      </goals>
                      <configuration>
                          <descriptor>src/test/resources/rest/bwlist-rest-test-asm.xml</descriptor>
                          <finalName>rest-test-bwlist</finalName>
                          <appendAssemblyId>false</appendAssemblyId>
                          <outputDirectory>target/test-classes/rest/</outputDirectory>
                      </configuration>
                  </execution>
                  <execution>
                      <phase>process-test-classes</phase>
                      <id>rest-test-war</id>
                      <goals>
                          <goal>single</goal>
                      </goals>
                      <configuration>
                          <descriptor>src/test/resources/rest/rest-test-asm.xml</descriptor>
                          <finalName>rest-test</finalName>
                          <appendAssemblyId>false</appendAssemblyId>
                          <outputDirectory>target/test-classes/rest/</outputDirectory>
                      </configuration>
                  </execution>
              </executions>
          </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
               <execution>
                  <phase>test</phase>
                  <goals>
                     <goal>test-jar</goal>
                  </goals>
               </execution>
            </executions>
         </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
               <skipTests>${skipIntegrationTests}</skipTests>
               <excludes>
                  <exclude>**/ReplicatedJMSFailoverTest.java</exclude>
                  <exclude>org/hornetq/tests/util/*.java</exclude>
               </excludes>
               <argLine>-Djgroups.bind_addr=::1 ${hornetq-surefire-argline}</argLine>
            </configuration>
         </plugin>
      </plugins>
   </build>

</project>
